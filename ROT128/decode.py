hex_list = [(hex(i)[2:].zfill(2).upper()) for i in range(256)]  # 00~FF 까지의 hex값을 리스트형태로 순서대로 저장


with open('ROT128\encfile', 'rb') as f:     # 암호화된 파일 불러오기
    encfile = f.read()

encfile_list = [encfile[i:i+2].decode('utf-8') for i in range(0, len(encfile), 2)]    # 불러온 암호화된 파일을 2자리씩 UTF-8인코딩으로 lsit자료형으로 저장


result_list = list(range(len(encfile_list)))    # 마지막 flag.png 바이너리의 문자열이 될 변수 생성

for i in range(len(encfile_list)):      # encfile_list의 길이만큼 반복 (0~encfile_list길이)
    hex_b = encfile_list[i]     # encfile_list의 첫번째 인덱스부터 순서대로 값으 넣음
    index = hex_list.index(hex_b)   # hex_list에서 방금 넣었던 hex_b의 값과 동일한 값의 hex_list 인덱스값을 index에 저장
    result_list[i] = hex_list[index - 128]  # index값에서 128을 뺀 hex_list인덱스의 값을 저장

result_list = ''.join(result_list)  # 모든 리스트의 요소들을 이어 하나의 문자열로 변경

with open('flag.png', 'wb') as f:   # flag.png파일을 쓰기와 바이너리 파일로 오픈
    f.write(bytes.fromhex(result_list))     # result_list를 바이너리형태로 flag.png에 쓰기



